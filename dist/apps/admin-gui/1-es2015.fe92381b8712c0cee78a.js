(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{Fm3m:function(e,t,s){"use strict";s.d(t,"a",(function(){return l}));var r=s("X2Q7"),i=s("Iydx"),c=s("EM62"),n=s("sEIs"),a=s("2kYt"),o=s("NU+N");function u(e,t){if(1&e&&c.Rb(0,"app-managers-page",1),2&e){const e=c.ic();c.oc("complementaryObject",e.resource)("complementaryObjectType",e.type)("theme",e.theme)("availableRoles",e.availableRoles)}}let l=(()=>{class e{constructor(e,t){this.route=e,this.resourceService=t,this.availableRoles=[i.a.RESOURCEADMIN],this.type="Resource",this.theme="resource-theme"}ngOnInit(){this.route.parent.parent.params.subscribe(e=>{this.resourceService.getResourceById(e.resourceId).subscribe(e=>{this.resource=e})})}}return e.\u0275fac=function(t){return new(t||e)(c.Qb(n.a),c.Qb(r.l))},e.\u0275cmp=c.Kb({type:e,selectors:[["app-resource-settings-managers"]],decls:1,vars:1,consts:[[3,"complementaryObject","complementaryObjectType","theme","availableRoles",4,"ngIf"],[3,"complementaryObject","complementaryObjectType","theme","availableRoles"]],template:function(e,t){1&e&&c.Jc(0,u,1,4,"app-managers-page",0),2&e&&c.oc("ngIf",t.resource)},directives:[a.t,o.a],styles:[""]}),e})()},GyaY:function(e,t,s){"use strict";s.d(t,"a",(function(){return n}));var r=s("TkCa"),i=s("EM62"),c=s("ma6z");let n=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i.Kb({type:e,selectors:[["app-resource-settings"]],hostVars:2,hostBindings:function(e,t){2&e&&i.Gb("router-component",!0)},decls:1,vars:0,template:function(e,t){1&e&&i.Rb(0,"app-animated-router-outlet")},directives:[c.a],styles:[""],data:{animation:[r.a]}}),e})()},HUrR:function(e,t,s){"use strict";s.d(t,"a",(function(){return a}));var r=s("X2Q7"),i=s("EM62"),c=s("sEIs"),n=s("ZG5M");let a=(()=>{class e{constructor(e,t){this.route=e,this.resourceManager=t,this.items=[]}ngOnInit(){this.route.parent.parent.params.subscribe(e=>{this.resourceManager.getResourceById(e.resourceId).subscribe(e=>{this.resource=e,this.initItems("facilities"!==this.route.parent.parent.parent.snapshot.url[0].path)})})}initItems(e){this.items=[{cssIcon:"perun-attributes",url:`${e?"/organizations/"+this.resource.voId:"/facilities/"+this.resource.facilityId}/resources/${this.resource.id}/settings/attributes`,label:"MENU_ITEMS.RESOURCE.ATTRIBUTES",style:"resource-btn"},{cssIcon:"perun-manager",url:`${e?"/organizations/"+this.resource.voId:"/facilities/"+this.resource.facilityId}/resources/${this.resource.id}/settings/managers`,label:"MENU_ITEMS.RESOURCE.MANAGERS",style:"resource-btn"}]}}return e.\u0275fac=function(t){return new(t||e)(i.Qb(c.a),i.Qb(r.l))},e.\u0275cmp=i.Kb({type:e,selectors:[["app-resource-settings-overview"]],hostVars:2,hostBindings:function(e,t){2&e&&i.Gb("router-component",!0)},decls:2,vars:2,consts:[[3,"items","size"]],template:function(e,t){1&e&&(i.Wb(0,"div"),i.Rb(1,"perun-web-apps-menu-buttons-field",0),i.Vb()),2&e&&(i.Cb(1),i.oc("items",t.items)("size","small"))},directives:[n.a],styles:[""]}),e})()},Igkk:function(e,t,s){"use strict";s.d(t,"a",(function(){return v}));var r=s("Ssnw"),i=s("HHEo"),c=s("cqs0"),n=s("mEf3"),a=s("IDQ9"),o=s("8clQ"),u=s("X2Q7"),l=s("iyZ4"),b=s("EM62"),p=s("sEIs"),d=s("OZ4H"),h=s("s2Ay"),f=s("0XDM"),g=s("PBFl"),I=s("A8Ay"),m=s("2kYt"),E=s("csyo"),S=s("LKLE");const R=["list"];function C(e,t){1&e&&b.Rb(0,"mat-spinner",8)}function T(e,t){if(1&e){const e=b.Xb();b.Wb(0,"perun-web-apps-attributes-list",9,10),b.ec("page",(function(t){return b.Bc(e),b.ic().pageChanged(t)})),b.Vb()}if(2&e){const e=b.ic();b.oc("pageSize",e.pageSize)("filterValue",e.filterValue)("attributes",e.attributes)("selection",e.selection)}}let v=(()=>{class e{constructor(e,t,s,r,i,n){this.attributesManager=e,this.route=t,this.dialog=s,this.notificator=r,this.tableConfigService=i,this.translate=n,this.attributes=[],this.selection=new c.c(!0,[]),this.filterValue="",this.tableId=l.m,this.translate.get("RESOURCE_DETAIL.SETTINGS.ATTRIBUTES.SUCCESS_SAVE").subscribe(e=>this.saveSuccessMessage=e),this.translate.get("RESOURCE_DETAIL.SETTINGS.ATTRIBUTES.SUCCESS_DELETE").subscribe(e=>this.deleteSuccessMessage=e)}ngOnInit(){this.pageSize=this.tableConfigService.getTablePageSize(this.tableId),this.route.parent.parent.params.subscribe(e=>{this.resourceId=e.resourceId,this.refreshTable()})}onDelete(){const e=Object(o.k)();e.width="450px",e.data={entityId:this.resourceId,entity:"resource",attributes:this.selection.selected},this.dialog.open(n.a,e).afterClosed().subscribe(e=>{e&&this.refreshTable()})}onSave(){this.list.updateMapAttributes();const e=Object(o.k)();e.width="450px",e.data={entityId:this.resourceId,entity:"resource",attributes:this.selection.selected},this.dialog.open(i.c,e).afterClosed().subscribe(e=>{e&&this.refreshTable()})}onCreate(){const e=Object(o.k)();e.width="1050px",e.data={entityId:this.resourceId,entity:"resource",notEmptyAttributes:this.attributes,style:"resource-theme"},this.dialog.open(a.a,e).afterClosed().subscribe(e=>{"saved"===e&&this.refreshTable()})}refreshTable(){this.loading=!0,this.attributesManager.getResourceAttributes(this.resourceId).subscribe(e=>{this.attributes=e,this.selection.clear(),this.loading=!1})}applyFilter(e){this.filterValue=e}pageChanged(e){this.pageSize=e.pageSize,this.tableConfigService.setTablePageSize(this.tableId,e.pageSize)}}return e.\u0275fac=function(t){return new(t||e)(b.Qb(u.c),b.Qb(p.a),b.Qb(d.b),b.Qb(r.j),b.Qb(l.bb),b.Qb(h.e))},e.\u0275cmp=b.Kb({type:e,selectors:[["app-resource-settings-attributes"]],viewQuery:function(e,t){var s;1&e&&b.Sc(R,!0),2&e&&b.wc(s=b.fc())&&(t.list=s.first)},hostVars:2,hostBindings:function(e,t){2&e&&b.Gb("router-component",!0)},decls:17,vars:17,consts:[[1,"page-subtitle"],[3,"refresh"],["mat-flat-button","","color","accent",1,"mr-2",3,"click"],["mat-flat-button","","color","accent",1,"mr-2",3,"disabled","click"],["mat-flat-button","","color","warn",3,"disabled","click"],[3,"placeholder","filter"],["class","ml-auto mr-auto",4,"ngIf"],[3,"pageSize","filterValue","attributes","selection","page",4,"ngIf"],[1,"ml-auto","mr-auto"],[3,"pageSize","filterValue","attributes","selection","page"],["list",""]],template:function(e,t){1&e&&(b.Wb(0,"div"),b.Wb(1,"h1",0),b.Lc(2),b.jc(3,"translate"),b.Vb(),b.Wb(4,"perun-web-apps-refresh-button",1),b.ec("refresh",(function(){return t.refreshTable()})),b.Vb(),b.Wb(5,"button",2),b.ec("click",(function(){return t.onCreate()})),b.Lc(6),b.jc(7,"translate"),b.Vb(),b.Wb(8,"button",3),b.ec("click",(function(){return t.onSave()})),b.Lc(9),b.jc(10,"translate"),b.Vb(),b.Wb(11,"button",4),b.ec("click",(function(){return t.onDelete()})),b.Lc(12),b.jc(13,"translate"),b.Vb(),b.Wb(14,"perun-web-apps-immediate-filter",5),b.ec("filter",(function(e){return t.applyFilter(e)})),b.Vb(),b.Jc(15,C,1,0,"mat-spinner",6),b.Jc(16,T,2,4,"perun-web-apps-attributes-list",7),b.Vb()),2&e&&(b.Cb(2),b.Mc(b.kc(3,9,"RESOURCE_DETAIL.SETTINGS.ATTRIBUTES.TITLE")),b.Cb(4),b.Nc(" ",b.kc(7,11,"RESOURCE_DETAIL.SETTINGS.ATTRIBUTES.CREATE")," "),b.Cb(2),b.oc("disabled",0===t.selection.selected.length),b.Cb(1),b.Nc(" ",b.kc(10,13,"RESOURCE_DETAIL.SETTINGS.ATTRIBUTES.SAVE")," "),b.Cb(2),b.oc("disabled",0===t.selection.selected.length),b.Cb(1),b.Nc(" ",b.kc(13,15,"RESOURCE_DETAIL.SETTINGS.ATTRIBUTES.DELETE")," "),b.Cb(2),b.oc("placeholder","SHARED_LIB.PERUN.COMPONENTS.ATTRIBUTES_LIST.FILTER"),b.Cb(1),b.oc("ngIf",t.loading),b.Cb(1),b.oc("ngIf",!t.loading))},directives:[f.a,g.b,I.a,m.t,E.c,S.a],pipes:[h.d],styles:[""]}),e})()},jblC:function(e,t,s){"use strict";s.d(t,"a",(function(){return y}));var r=s("X2Q7"),i=s("cqs0"),c=s("ILoV"),n=s("VEwN"),a=s("iyZ4"),o=s("8clQ"),u=s("EM62"),l=s("sEIs"),b=s("OZ4H"),p=s("0XDM"),d=s("PBFl"),h=s("FoxU"),f=s("2kYt"),g=s("csyo"),I=s("K9kF"),m=s("FcRk"),E=s("s2Ay");const S=["checkbox"];function R(e,t){1&e&&u.Rb(0,"mat-spinner",8)}const C=function(){return["vo","menu"]};function T(e,t){if(1&e){const e=u.Xb();u.Wb(0,"div",9),u.Wb(1,"perun-web-apps-groups-list",10),u.ec("page",(function(t){return u.Bc(e),u.ic().pageChanged(t)})),u.Vb(),u.Vb()}if(2&e){const e=u.ic();u.Cb(1),u.oc("pageSize",e.pageSize)("groups",e.filteredGroups)("selection",e.selected)("disableMembers",!1)("hideColumns",u.sc(5,C))}}function v(e,t){1&e&&(u.Wb(0,"app-alert",11),u.Lc(1),u.jc(2,"translate"),u.Vb()),2&e&&(u.Cb(1),u.Nc(" ",u.kc(2,1,"RESOURCE_DETAIL.ASSIGNED_GROUPS.NO_GROUPS"),"\n"))}let y=(()=>{class e{constructor(e,t,s,r){this.route=e,this.resourcesManager=t,this.tableConfigService=s,this.dialog=r,this.assignedGroups=[],this.selected=new i.c(!0,[]),this.filteredGroups=[],this.tableId=a.I}ngOnInit(){this.pageSize=this.tableConfigService.getTablePageSize(this.tableId),this.loading=!0,this.route.parent.params.subscribe(e=>{this.resourceId=e.resourceId,this.loadAllGroups()})}loadAllGroups(){this.loading=!0,this.resourcesManager.getAssignedGroups(this.resourceId).subscribe(e=>{this.assignedGroups=e,this.filteredGroups=e,this.selected.clear(),this.loading=!1})}addGroup(){const e=Object(o.k)();e.width="800px",e.data={theme:"resource-theme",resourceId:this.resourceId},this.dialog.open(n.a,e).afterClosed().subscribe(e=>{e&&this.loadAllGroups()})}removeGroups(){const e=Object(o.k)();e.width="500px",e.data={resourceId:this.resourceId,groups:this.selected.selected},this.dialog.open(c.a,e).afterClosed().subscribe(e=>{e&&this.loadAllGroups()})}applyFilter(e){this.filteredGroups=this.assignedGroups.filter(t=>t.name.toLowerCase().includes(e.toLowerCase()))}pageChanged(e){this.pageSize=e.pageSize,this.tableConfigService.setTablePageSize(this.tableId,e.pageSize)}}return e.\u0275fac=function(t){return new(t||e)(u.Qb(l.a),u.Qb(r.l),u.Qb(a.bb),u.Qb(b.b))},e.\u0275cmp=u.Kb({type:e,selectors:[["app-perun-web-apps-resource-groups"]],viewQuery:function(e,t){var s;1&e&&u.Hc(S,!0),2&e&&u.wc(s=u.fc())&&(t.checkbox=s.first)},decls:14,vars:14,consts:[[1,"page-subtitle"],[3,"refresh"],["mat-flat-button","","color","accent",3,"click"],["mat-flat-button","","color","warn",1,"ml-2",3,"disabled","click"],[3,"placeholder","filter"],["class","ml-auto mr-auto",4,"ngIf"],["class","mt-3",4,"ngIf"],["color","warn",4,"ngIf"],[1,"ml-auto","mr-auto"],[1,"mt-3"],[3,"pageSize","groups","selection","disableMembers","hideColumns","page"],["color","warn"]],template:function(e,t){1&e&&(u.Wb(0,"h1",0),u.Lc(1),u.jc(2,"translate"),u.Vb(),u.Wb(3,"perun-web-apps-refresh-button",1),u.ec("refresh",(function(){return t.loadAllGroups()})),u.Vb(),u.Wb(4,"button",2),u.ec("click",(function(){return t.addGroup()})),u.Lc(5),u.jc(6,"translate"),u.Vb(),u.Wb(7,"button",3),u.ec("click",(function(){return t.removeGroups()})),u.Lc(8),u.jc(9,"translate"),u.Vb(),u.Wb(10,"app-debounce-filter",4),u.ec("filter",(function(e){return t.applyFilter(e)})),u.Vb(),u.Jc(11,R,1,0,"mat-spinner",5),u.Jc(12,T,2,6,"div",6),u.Jc(13,v,3,3,"app-alert",7)),2&e&&(u.Cb(1),u.Mc(u.kc(2,8,"RESOURCE_DETAIL.ASSIGNED_GROUPS.TITLE")),u.Cb(4),u.Nc(" ",u.kc(6,10,"RESOURCE_DETAIL.ASSIGNED_GROUPS.ADD_GROUP"),"\n"),u.Cb(2),u.oc("disabled",0===t.selected.selected.length),u.Cb(1),u.Nc(" ",u.kc(9,12,"RESOURCE_DETAIL.ASSIGNED_GROUPS.REMOVE_GROUP"),"\n"),u.Cb(2),u.oc("placeholder","RESOURCE_DETAIL.ASSIGNED_GROUPS.FILTER_GROUPS"),u.Cb(1),u.oc("ngIf",t.loading),u.Cb(1),u.oc("ngIf",!t.loading&&0!==t.assignedGroups.length),u.Cb(1),u.oc("ngIf",0===t.assignedGroups.length&&!t.loading))},directives:[p.a,d.b,h.a,f.t,g.c,I.a,m.a],pipes:[E.d],styles:[""]}),e})()},nSPi:function(e,t,s){"use strict";s.d(t,"a",(function(){return I}));var r=s("TkCa"),i=s("4sdY"),c=s("EkAj"),n=s("X2Q7"),a=s("EM62"),o=s("sEIs"),u=s("2kYt"),l=s("EtYo"),b=s("ma6z"),p=s("s2Ay");const d=function(e,t){return["/facilities",e,"resources",t]},h=function(e){return["/facilities",e]},f=function(e){return["/organizations",e]};function g(e,t){if(1&e&&(a.Wb(0,"div",1),a.Rb(1,"perun-web-apps-back-button"),a.Wb(2,"h1",2),a.Lc(3),a.jc(4,"translate"),a.Wb(5,"a",3),a.Lc(6),a.Vb(),a.Wb(7,"span",4),a.Lc(8),a.Vb(),a.Rb(9,"br"),a.Wb(10,"span",5),a.Lc(11),a.jc(12,"translate"),a.Wb(13,"a",3),a.Lc(14),a.Vb(),a.Wb(15,"span",4),a.Lc(16),a.Vb(),a.Vb(),a.Wb(17,"span",6),a.Lc(18),a.jc(19,"translate"),a.Wb(20,"a",3),a.Lc(21),a.Vb(),a.Wb(22,"span",4),a.Lc(23),a.Vb(),a.Vb(),a.Wb(24,"span",6),a.Lc(25),a.jc(26,"translate"),a.Wb(27,"span",7),a.Lc(28),a.Vb(),a.Vb(),a.Vb(),a.Rb(29,"app-animated-router-outlet"),a.Vb()),2&e){const e=a.ic();a.Cb(3),a.Nc(" ",a.kc(4,14,"RESOURCE_DETAIL.TITLE")," "),a.Cb(2),a.oc("routerLink",a.uc(22,d,e.resource.facilityId,e.resource.id)),a.Cb(1),a.Nc(" ",e.resource.name," "),a.Cb(2),a.Nc(" \xa0#",e.resource.id," "),a.Cb(3),a.Nc(" ",a.kc(12,16,"RESOURCE_DETAIL.FACILITY"),": "),a.Cb(2),a.oc("routerLink",a.tc(25,h,e.resource.facilityId)),a.Cb(1),a.Nc(" ",e.resource.facility.name," "),a.Cb(2),a.Nc(" \xa0#",e.resource.facilityId," "),a.Cb(2),a.Nc(" ",a.kc(19,18,"RESOURCE_DETAIL.VO"),": "),a.Cb(2),a.oc("routerLink",a.tc(27,f,e.resource.vo.id)),a.Cb(1),a.Nc(" ",e.resource.vo.name," "),a.Cb(2),a.Nc(" \xa0#",e.resource.voId," "),a.Cb(2),a.Nc(" ",a.kc(26,20,"RESOURCE_DETAIL.DESCRIPTION"),": "),a.Cb(3),a.Nc(" ",e.resource.description," ")}}let I=(()=>{class e{constructor(e,t,s,r,i,c){this.route=e,this.facilityManager=t,this.vosManagerService=s,this.resourcesManager=r,this.sideMenuService=i,this.sideMenuItemService=c}ngOnInit(){this.route.params.subscribe(e=>{this.resourcesManager.getRichResourceById(e.resourceId).subscribe(e=>{this.resource=e,"facilities"===this.route.parent.snapshot.url[0].path?this.facilityManager.getFacilityById(e.facilityId).subscribe(t=>{const s=this.sideMenuItemService.parseFacility(t),r=this.sideMenuItemService.parseResource(e,!1);this.sideMenuService.setFacilityMenuItems([s,r])}):this.vosManagerService.getVoById(e.voId).subscribe(t=>{const s=this.sideMenuItemService.parseVo(t),r=this.sideMenuItemService.parseResource(e,!0);this.sideMenuService.setAccessMenuItems([s,r])})})})}}return e.\u0275fac=function(t){return new(t||e)(a.Qb(o.a),a.Qb(n.g),a.Qb(n.p),a.Qb(n.l),a.Qb(i.a),a.Qb(c.a))},e.\u0275cmp=a.Kb({type:e,selectors:[["app-resource-detail-page"]],decls:1,vars:1,consts:[["class","container-fluid pl-xl-5 pr-xl-5 resource-theme",4,"ngIf"],[1,"container-fluid","pl-xl-5","pr-xl-5","resource-theme"],[1,"page-title"],[1,"resource-link",3,"routerLink"],[1,"text-muted"],[1,"text-muted","mr-5","entity-info"],[1,"text-muted","mr-5","entity-info","break-line"],[1,"resource-text"]],template:function(e,t){1&e&&a.Jc(0,g,30,29,"div",0),2&e&&a.oc("ngIf",void 0!==t.resource)},directives:[u.t,l.a,o.i,b.a],pipes:[p.d],styles:[".break-line[_ngcontent-%COMP%]{display:inline-block}"],data:{animation:[r.a]}}),e})()},"y/MV":function(e,t,s){"use strict";s.d(t,"a",(function(){return a}));var r=s("X2Q7"),i=s("EM62"),c=s("sEIs"),n=s("ZG5M");let a=(()=>{class e{constructor(e,t){this.resourcesManager=e,this.route=t,this.navItems=[]}ngOnInit(){this.route.params.subscribe(e=>{this.resourcesManager.getResourceById(e.resourceId).subscribe(e=>{this.resource=e,this.initItems("facilities"!==this.route.parent.parent.snapshot.url[0].path)})})}initItems(e){const t=e?"/organizations/"+this.resource.voId:"/facilities/"+this.resource.facilityId;this.navItems=[{cssIcon:"perun-group",url:`${t}/resources/${this.resource.id}/groups`,label:"MENU_ITEMS.RESOURCE.ASSIGNED_GROUPS",style:"resource-btn"},{cssIcon:"perun-settings2",url:`${t}/resources/${this.resource.id}/settings`,label:"MENU_ITEMS.RESOURCE.SETTINGS",style:"resource-btn"}]}}return e.\u0275fac=function(t){return new(t||e)(i.Qb(r.l),i.Qb(c.a))},e.\u0275cmp=i.Kb({type:e,selectors:[["app-resource-overview"]],hostVars:2,hostBindings:function(e,t){2&e&&i.Gb("router-component",!0)},decls:2,vars:2,consts:[[3,"items","size"]],template:function(e,t){1&e&&(i.Wb(0,"div"),i.Rb(1,"perun-web-apps-menu-buttons-field",0),i.Vb()),2&e&&(i.Cb(1),i.oc("items",t.navItems)("size","small"))},directives:[n.a],styles:[""]}),e})()}}]);