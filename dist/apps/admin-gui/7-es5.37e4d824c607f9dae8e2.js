function _createForOfIteratorHelper(e){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=_unsupportedIterableToArray(e))){var t=0,i=function(){};return{s:i,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,c,n=!0,s=!1;return{s:function(){a=e[Symbol.iterator]()},n:function(){var e=a.next();return n=e.done,e},e:function(e){s=!0,c=e},f:function(){try{n||null==a.return||a.return()}finally{if(s)throw c}}}}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(i):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,a=new Array(t);i<t;i++)a[i]=e[i];return a}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function _createClass(e,t,i){return t&&_defineProperties(e.prototype,t),i&&_defineProperties(e,i),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{"pjY/":function(e,t,i){"use strict";i.r(t),i.d(t,"FacilitiesModule",(function(){return $t}));var a=i("2kYt"),c=i("sEIs"),n=i("4sdY"),s=i("X2Q7"),r=i("8clQ"),l=i("iyZ4"),o=i("cqs0"),u=i("AtkZ"),b=i("49Zq"),f=i("EM62"),p=i("OZ4H"),d=i("EtYo"),h=i("0XDM"),g=i("PBFl"),m=i("A8Ay"),y=i("csyo"),I=i("xH52"),v=i("s2Ay");function C(e,t){if(1&e){var i=f.Xb();f.Wb(0,"perun-web-apps-refresh-button",8),f.ec("refresh",(function(){return f.Bc(i),f.ic().refreshTable()})),f.Vb()}}function S(e,t){if(1&e){var i=f.Xb();f.Wb(0,"button",9),f.ec("click",(function(){return f.Bc(i),f.ic().onCreate()})),f.Lc(1),f.jc(2,"translate"),f.Vb()}2&e&&(f.Cb(1),f.Mc(f.kc(2,1,"FACILITY_MANAGEMENT.CREATE")))}function T(e,t){if(1&e){var i=f.Xb();f.Wb(0,"button",10),f.ec("click",(function(){return f.Bc(i),f.ic().onDelete()})),f.Lc(1),f.jc(2,"translate"),f.Vb()}if(2&e){var a=f.ic();f.oc("disabled",0===a.selection.selected.length),f.Cb(1),f.Mc(f.kc(2,2,"FACILITY_MANAGEMENT.DELETE"))}}function A(e,t){if(1&e){var i=f.Xb();f.Wb(0,"perun-web-apps-immediate-filter",11),f.ec("filter",(function(e){return f.Bc(i),f.ic().applyFilter(e)})),f.Vb()}2&e&&f.oc("placeholder","FACILITY_MANAGEMENT.FILTER_PLACEHOLDER")}function E(e,t){1&e&&f.Rb(0,"mat-spinner",12)}function k(e,t){if(1&e){var i=f.Xb();f.Wb(0,"app-facility-select-table",13),f.ec("page",(function(e){return f.Bc(i),f.ic().pageChanged(e)})),f.Vb()}if(2&e){var a=f.ic();f.oc("pageSize",a.pageSize)("selection",a.selection)("filterValue",a.filterValue)("facilities",a.facilities)("recentIds",a.recentIds)}}var L,V=((L=function(){function e(t,i,a,c){_classCallCheck(this,e),this.facilityManager=t,this.sideMenuService=i,this.tableConfigService=a,this.dialog=c,this.facilities=[],this.recentIds=[],this.filterValue="",this.tableId=l.u,this.selection=new o.c(!1,[])}return _createClass(e,[{key:"ngOnInit",value:function(){this.pageSize=this.tableConfigService.getTablePageSize(this.tableId),this.sideMenuService.setFacilityMenuItems([]),this.refreshTable()}},{key:"refreshTable",value:function(){var e=this;this.loading=!0,this.facilityManager.getRichFacilities().subscribe((function(t){e.selection.clear(),e.facilities=Object(r.m)("facilities",t),e.recentIds=Object(r.n)("facilities"),e.loading=!1}))}},{key:"onCreate",value:function(){var e=this,t=Object(r.k)();t.width="800px",t.data={theme:"facility-theme"},this.dialog.open(u.a,t).afterClosed().subscribe((function(t){t&&e.refreshTable()}))}},{key:"onDelete",value:function(){var e=this,t=Object(r.k)();t.width="650px",t.data={facility:this.selection.selected[0],theme:"facility-theme"},this.dialog.open(b.a,t).afterClosed().subscribe((function(t){t&&e.refreshTable()}))}},{key:"applyFilter",value:function(e){this.filterValue=e}},{key:"pageChanged",value:function(e){this.pageSize=e.pageSize,this.tableConfigService.setTablePageSize(this.tableId,e.pageSize)}}]),e}()).\u0275fac=function(e){return new(e||L)(f.Qb(s.g),f.Qb(n.a),f.Qb(l.bb),f.Qb(p.b))},L.\u0275cmp=f.Kb({type:L,selectors:[["app-facility-select-page"]],decls:11,vars:9,consts:[[1,"container-fluid","pl-xl-5","pr-xl-5","facility-theme"],[1,"page-title"],[3,"refresh",4,"ngIf"],["mat-flat-button","","color","accent",3,"click",4,"ngIf"],["mat-flat-button","","class","ml-2","color","warn",3,"disabled","click",4,"ngIf"],[3,"placeholder","filter",4,"ngIf"],["class","ml-auto mr-auto",4,"ngIf"],[3,"pageSize","selection","filterValue","facilities","recentIds","page",4,"ngIf"],[3,"refresh"],["mat-flat-button","","color","accent",3,"click"],["mat-flat-button","","color","warn",1,"ml-2",3,"disabled","click"],[3,"placeholder","filter"],[1,"ml-auto","mr-auto"],[3,"pageSize","selection","filterValue","facilities","recentIds","page"]],template:function(e,t){1&e&&(f.Wb(0,"div",0),f.Rb(1,"perun-web-apps-back-button"),f.Wb(2,"h1",1),f.Lc(3),f.jc(4,"translate"),f.Vb(),f.Jc(5,C,1,0,"perun-web-apps-refresh-button",2),f.Jc(6,S,3,3,"button",3),f.Jc(7,T,3,4,"button",4),f.Jc(8,A,1,1,"perun-web-apps-immediate-filter",5),f.Jc(9,E,1,0,"mat-spinner",6),f.Jc(10,k,1,5,"app-facility-select-table",7),f.Vb()),2&e&&(f.Cb(3),f.Mc(f.kc(4,7,"FACILITY_MANAGEMENT.TITLE")),f.Cb(2),f.oc("ngIf",!t.loading),f.Cb(1),f.oc("ngIf",!t.loading),f.Cb(1),f.oc("ngIf",!t.loading),f.Cb(1),f.oc("ngIf",!t.loading),f.Cb(1),f.oc("ngIf",t.loading),f.Cb(1),f.oc("ngIf",!t.loading))},directives:[d.a,a.t,h.a,g.b,m.a,y.c,I.a],pipes:[v.d],styles:[""]}),L),F=i("TkCa"),w=i("EkAj"),_=i("ma6z"),O=function(e){return["/facilities",e]};function R(e,t){if(1&e&&(f.Wb(0,"div",1),f.Rb(1,"perun-web-apps-back-button"),f.Wb(2,"h1",2),f.Lc(3),f.jc(4,"translate"),f.Wb(5,"a",3),f.Lc(6),f.Vb(),f.Wb(7,"span",4),f.Lc(8),f.Vb(),f.Rb(9,"br"),f.Wb(10,"span",5),f.Lc(11),f.jc(12,"translate"),f.Wb(13,"span",6),f.Lc(14),f.Vb(),f.Vb(),f.Vb(),f.Rb(15,"app-animated-router-outlet"),f.Vb()),2&e){var i=f.ic();f.Cb(3),f.Nc(" ",f.kc(4,6,"FACILITY_DETAIL.TITLE")," "),f.Cb(2),f.oc("routerLink",f.tc(10,O,i.facility.id)),f.Cb(1),f.Mc(i.facility.name),f.Cb(2),f.Nc(" \xa0#",i.facility.id," "),f.Cb(3),f.Nc(" ",f.kc(12,8,"FACILITY_DETAIL.DESCRIPTION"),": "),f.Cb(3),f.Nc(" ",i.facility.description," ")}}var M,N,D,W,j=((M=function(){function e(t,i,a,c){_classCallCheck(this,e),this.facilityManager=t,this.route=i,this.sideMenuService=a,this.sideMenuItemService=c}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.route.params.subscribe((function(t){e.facilityManager.getFacilityById(t.facilityId).subscribe((function(t){e.facility=t;var i=e.sideMenuItemService.parseFacility(t);e.sideMenuService.setFacilityMenuItems([i]),Object(r.b)("facilities",e.facility)}))}))}}]),e}()).\u0275fac=function(e){return new(e||M)(f.Qb(s.g),f.Qb(c.a),f.Qb(n.a),f.Qb(w.a))},M.\u0275cmp=f.Kb({type:M,selectors:[["app-facility-detail-page"]],decls:1,vars:1,consts:[["class","container-fluid pl-xl-5 pr-xl-5 facility-theme",4,"ngIf"],[1,"container-fluid","pl-xl-5","pr-xl-5","facility-theme"],[1,"page-title"],[1,"facility-link",3,"routerLink"],[1,"text-muted"],[1,"text-muted","mt-1","entity-info"],[1,"facility-text"]],template:function(e,t){1&e&&f.Jc(0,R,16,12,"div",0),2&e&&f.oc("ngIf",void 0!==t.facility)},directives:[a.t,d.a,c.i,_.a],pipes:[v.d],styles:[""],data:{animation:[F.a]}}),M),z=i("ZG5M"),G=((N=function(){function e(t,i){_classCallCheck(this,e),this.facilityManager=t,this.route=i,this.navItems=[]}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.route.params.subscribe((function(t){e.facilityManager.getFacilityById(t.facilityId).subscribe((function(t){e.facility=t,e.initItems()}))}))}},{key:"initItems",value:function(){this.navItems=[{cssIcon:"perun-manage-facility",url:"/facilities/".concat(this.facility.id,"/resources"),label:"MENU_ITEMS.FACILITY.RESOURCES",style:"facility-btn"},{cssIcon:"perun-group",url:"/facilities/".concat(this.facility.id,"/allowed-groups"),label:"MENU_ITEMS.FACILITY.ALLOWED_GROUPS",style:"facility-btn"},{cssIcon:"perun-settings2",url:"/facilities/".concat(this.facility.id,"/service-config"),label:"MENU_ITEMS.FACILITY.SERVICE_CONFIG",style:"facility-btn"},{cssIcon:"perun-service_destination",url:"/facilities/".concat(this.facility.id,"/services-destinations"),label:"MENU_ITEMS.FACILITY.SERVICES_DESTINATIONS",style:"facility-btn"},{cssIcon:"perun-hosts",url:"/facilities/".concat(this.facility.id,"/hosts"),label:"MENU_ITEMS.FACILITY.HOSTS",style:"facility-btn"},{cssIcon:"perun-security-teams",url:"/facilities/".concat(this.facility.id,"/security-teams"),label:"MENU_ITEMS.FACILITY.SECURITY_TEAMS",style:"facility-btn"},{cssIcon:"perun-settings2",url:"/facilities/".concat(this.facility.id,"/settings"),label:"MENU_ITEMS.FACILITY.SETTINGS",style:"facility-btn"}]}}]),e}()).\u0275fac=function(e){return new(e||N)(f.Qb(s.g),f.Qb(c.a))},N.\u0275cmp=f.Kb({type:N,selectors:[["app-facility-overview"]],hostVars:2,hostBindings:function(e,t){2&e&&f.Gb("router-component",!0)},decls:2,vars:2,consts:[[3,"items","size"]],template:function(e,t){1&e&&(f.Wb(0,"div"),f.Rb(1,"perun-web-apps-menu-buttons-field",0),f.Vb()),2&e&&(f.Cb(1),f.oc("items",t.navItems)("size","small"))},directives:[z.a],styles:[""]}),N),B=i("s8L6"),Y=i("Wq+4"),Q=i("nSPi"),P=i("y/MV"),U=((W=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"ngOnInit",value:function(){}}]),e}()).\u0275fac=function(e){return new(e||W)},W.\u0275cmp=f.Kb({type:W,selectors:[["app-facility-settings"]],hostVars:2,hostBindings:function(e,t){2&e&&f.Gb("router-component",!0)},decls:1,vars:0,template:function(e,t){1&e&&f.Rb(0,"app-animated-router-outlet")},directives:[_.a],styles:[""],data:{animation:[F.a]}}),W),x=((D=function(){function e(t,i){_classCallCheck(this,e),this.route=t,this.facilityManager=i,this.items=[]}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.route.parent.parent.params.subscribe((function(t){e.facilityManager.getFacilityById(t.facilityId).subscribe((function(t){e.facility=t,e.initItems()}))}))}},{key:"initItems",value:function(){this.items=[{cssIcon:"perun-attributes",url:"/facilities/".concat(this.facility.id,"/settings/attributes"),label:"MENU_ITEMS.FACILITY.ATTRIBUTES",style:"facility-btn"},{cssIcon:"perun-user",url:"/facilities/".concat(this.facility.id,"/settings/owners"),label:"MENU_ITEMS.FACILITY.OWNERS",style:"facility-btn"},{cssIcon:"perun-manager",url:"/facilities/".concat(this.facility.id,"/settings/managers"),label:"MENU_ITEMS.FACILITY.MANAGERS",style:"facility-btn"},{cssIcon:"perun-black-list",url:"/facilities/".concat(this.facility.id,"/settings/blacklist"),label:"MENU_ITEMS.FACILITY.BLACKLIST",style:"facility-btn"}]}}]),e}()).\u0275fac=function(e){return new(e||D)(f.Qb(c.a),f.Qb(s.g))},D.\u0275cmp=f.Kb({type:D,selectors:[["app-facility-settings-overview"]],hostVars:2,hostBindings:function(e,t){2&e&&f.Gb("router-component",!0)},decls:2,vars:2,consts:[[3,"items","size"]],template:function(e,t){1&e&&(f.Wb(0,"div"),f.Rb(1,"perun-web-apps-menu-buttons-field",0),f.Vb()),2&e&&(f.Cb(1),f.oc("items",t.items)("size","small"))},directives:[z.a],styles:[""]}),D),H=i("Ssnw"),J=i("HHEo"),X=i("mEf3"),K=i("IDQ9"),q=i("LKLE"),$=["list"];function Z(e,t){1&e&&f.Rb(0,"mat-spinner",8)}function ee(e,t){if(1&e){var i=f.Xb();f.Wb(0,"perun-web-apps-attributes-list",9,10),f.ec("page",(function(e){return f.Bc(i),f.ic().pageChanged(e)})),f.Vb()}if(2&e){var a=f.ic();f.oc("pageSize",a.pageSize)("filterValue",a.filterValue)("attributes",a.attributes)("selection",a.selection)}}var te,ie=((te=function(){function e(t,i,a,c,n,s){var r=this;_classCallCheck(this,e),this.attributesManager=t,this.route=i,this.dialog=a,this.notificator=c,this.tableConfigService=n,this.translate=s,this.attributes=[],this.selection=new o.c(!0,[]),this.filterValue="",this.tableId=l.m,this.translate.get("FACILITY_DETAIL.SETTINGS.ATTRIBUTES.SUCCESS_SAVE").subscribe((function(e){return r.saveSuccessMessage=e})),this.translate.get("FACILITY_DETAIL.SETTINGS.ATTRIBUTES.SUCCESS_DELETE").subscribe((function(e){return r.deleteSuccessMessage=e}))}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.pageSize=this.tableConfigService.getTablePageSize(this.tableId),this.route.parent.parent.params.subscribe((function(t){e.facilityId=t.facilityId,e.refreshTable()}))}},{key:"onDelete",value:function(){var e=this,t=Object(r.k)();t.width="450px",t.data={entityId:this.facilityId,entity:"facility",attributes:this.selection.selected},this.dialog.open(X.a,t).afterClosed().subscribe((function(t){t&&e.refreshTable()}))}},{key:"onSave",value:function(){var e=this;this.list.updateMapAttributes();var t=Object(r.k)();t.width="450px",t.data={entityId:this.facilityId,entity:"facility",attributes:this.selection.selected},this.dialog.open(J.c,t).afterClosed().subscribe((function(t){t&&e.refreshTable()}))}},{key:"onCreate",value:function(){var e=this,t=Object(r.k)();t.width="1050px",t.data={entityId:this.facilityId,entity:"facility",notEmptyAttributes:this.attributes,style:"facility-theme"},this.dialog.open(K.a,t).afterClosed().subscribe((function(t){"saved"===t&&e.refreshTable()}))}},{key:"refreshTable",value:function(){var e=this;this.loading=!0,this.attributesManager.getFacilityAttributes(this.facilityId).subscribe((function(t){e.attributes=t,e.selection.clear(),e.loading=!1}))}},{key:"applyFilter",value:function(e){this.filterValue=e}},{key:"pageChanged",value:function(e){this.pageSize=e.pageSize,this.tableConfigService.setTablePageSize(this.tableId,e.pageSize)}}]),e}()).\u0275fac=function(e){return new(e||te)(f.Qb(s.c),f.Qb(c.a),f.Qb(p.b),f.Qb(H.j),f.Qb(l.bb),f.Qb(v.e))},te.\u0275cmp=f.Kb({type:te,selectors:[["app-facility-settings-attributes"]],viewQuery:function(e,t){var i;1&e&&f.Sc($,!0),2&e&&f.wc(i=f.fc())&&(t.list=i.first)},hostVars:2,hostBindings:function(e,t){2&e&&f.Gb("router-component",!0)},decls:18,vars:19,consts:[[1,"page-subtitle"],[3,"refresh"],["mat-flat-button","","color","accent",1,"mr-2",3,"click"],["mat-flat-button","","color","accent",1,"mr-2",3,"disabled","click"],["mat-flat-button","","color","warn",3,"disabled","click"],[3,"placeholder","filter"],["class","ml-auto mr-auto",4,"ngIf"],[3,"pageSize","filterValue","attributes","selection","page",4,"ngIf"],[1,"ml-auto","mr-auto"],[3,"pageSize","filterValue","attributes","selection","page"],["list",""]],template:function(e,t){1&e&&(f.Wb(0,"div"),f.Wb(1,"h1",0),f.Lc(2),f.jc(3,"translate"),f.Vb(),f.Wb(4,"perun-web-apps-refresh-button",1),f.ec("refresh",(function(){return t.refreshTable()})),f.Vb(),f.Wb(5,"button",2),f.ec("click",(function(){return t.onCreate()})),f.Lc(6),f.jc(7,"translate"),f.Vb(),f.Wb(8,"button",3),f.ec("click",(function(){return t.onSave()})),f.Lc(9),f.jc(10,"translate"),f.Vb(),f.Wb(11,"button",4),f.ec("click",(function(){return t.onDelete()})),f.Lc(12),f.jc(13,"translate"),f.Vb(),f.Wb(14,"perun-web-apps-immediate-filter",5),f.ec("filter",(function(e){return t.applyFilter(e)})),f.jc(15,"translate"),f.Vb(),f.Jc(16,Z,1,0,"mat-spinner",6),f.Jc(17,ee,2,4,"perun-web-apps-attributes-list",7),f.Vb()),2&e&&(f.Cb(2),f.Mc(f.kc(3,9,"FACILITY_DETAIL.SETTINGS.ATTRIBUTES.TITLE")),f.Cb(4),f.Nc(" ",f.kc(7,11,"FACILITY_DETAIL.SETTINGS.ATTRIBUTES.CREATE")," "),f.Cb(2),f.oc("disabled",0===t.selection.selected.length),f.Cb(1),f.Nc(" ",f.kc(10,13,"FACILITY_DETAIL.SETTINGS.ATTRIBUTES.SAVE")," "),f.Cb(2),f.oc("disabled",0===t.selection.selected.length),f.Cb(1),f.Nc(" ",f.kc(13,15,"FACILITY_DETAIL.SETTINGS.ATTRIBUTES.DELETE")," "),f.Cb(2),f.oc("placeholder",f.kc(15,17,"SHARED_LIB.PERUN.COMPONENTS.ATTRIBUTES_LIST.FILTER")),f.Cb(2),f.oc("ngIf",t.loading),f.Cb(1),f.oc("ngIf",!t.loading))},directives:[h.a,g.b,m.a,a.t,y.c,q.a],pipes:[v.d],styles:[""]}),te),ae=i("GyaY"),ce=i("HUrR"),ne=i("Igkk"),se=i("jblC"),re=i("nIj0"),le=i("jIqt"),oe=i("YtkY"),ue=i("t47Z"),be=i("+Tre"),fe=i("29Wa"),pe=i("Cd2c"),de=i("ulve"),he=i("mFH5"),ge=i("KZIX"),me=["FacilityAList"],ye=["ResourceAList"],Ie=["GroupAList"],ve=["MemberAList"];function Ce(e,t){if(1&e){var i=f.Xb();f.Wb(0,"perun-web-apps-attributes-list",7,8),f.ec("page",(function(e){return f.Bc(i),f.ic().pageChanged(e)})),f.Vb()}if(2&e){var a=f.ic();f.oc("pageSize",a.pageSize)("attributes",a.facilityAttributes)("selection",a.selectionFacility)}}function Se(e,t){if(1&e){var i=f.Xb();f.Wb(0,"perun-web-apps-attributes-list",7,9),f.ec("page",(function(e){return f.Bc(i),f.ic(2).pageChanged(e)})),f.Vb()}if(2&e){var a=f.ic(2);f.oc("pageSize",a.pageSize)("attributes",a.resourceAttributes)("selection",a.selectionResource)}}function Te(e,t){if(1&e){var i=f.Xb();f.Wb(0,"mat-tab",2),f.Wb(1,"button",3),f.ec("click",(function(){return f.Bc(i),f.ic().onAddAttResource()})),f.Lc(2),f.jc(3,"translate"),f.Vb(),f.Wb(4,"button",4),f.ec("click",(function(){return f.Bc(i),f.ic().onSaveResource()})),f.Lc(5),f.jc(6,"translate"),f.Vb(),f.Jc(7,Se,2,3,"perun-web-apps-attributes-list",5),f.Vb()}if(2&e){var a=f.ic();f.oc("label",a.resource.name+" (resource)"),f.Cb(2),f.Nc(" ",f.kc(3,5,"SHARED_LIB.PERUN.SERVICES_CONFIGURATIONS.ADD")," "),f.Cb(2),f.oc("disabled",0===a.selectionResource.selected.length),f.Cb(1),f.Nc(" ",f.kc(6,7,"SHARED_LIB.PERUN.SERVICES_CONFIGURATIONS.SAVE")," "),f.Cb(2),f.oc("ngIf",!!a.resourceAttributes)}}function Ae(e,t){if(1&e){var i=f.Xb();f.Wb(0,"perun-web-apps-attributes-list",7,10),f.ec("page",(function(e){return f.Bc(i),f.ic(2).pageChanged(e)})),f.Vb()}if(2&e){var a=f.ic(2);f.oc("pageSize",a.pageSize)("attributes",a.groupAttributes)("selection",a.selectionGroup)}}function Ee(e,t){if(1&e){var i=f.Xb();f.Wb(0,"mat-tab",2),f.Wb(1,"button",3),f.ec("click",(function(){return f.Bc(i),f.ic().onAddAttGroup()})),f.Lc(2),f.jc(3,"translate"),f.Vb(),f.Wb(4,"button",4),f.ec("click",(function(){return f.Bc(i),f.ic().onSaveGroup()})),f.Lc(5),f.jc(6,"translate"),f.Vb(),f.Jc(7,Ae,2,3,"perun-web-apps-attributes-list",5),f.Vb()}if(2&e){var a=f.ic();f.oc("label",a.group.name+" (group)"),f.Cb(2),f.Nc(" ",f.kc(3,5,"SHARED_LIB.PERUN.SERVICES_CONFIGURATIONS.ADD")," "),f.Cb(2),f.oc("disabled",0===a.selectionGroup.selected.length),f.Cb(1),f.Nc(" ",f.kc(6,7,"SHARED_LIB.PERUN.SERVICES_CONFIGURATIONS.SAVE")," "),f.Cb(2),f.oc("ngIf",!!a.groupAttributes)}}function ke(e,t){if(1&e){var i=f.Xb();f.Wb(0,"perun-web-apps-attributes-list",7,11),f.ec("page",(function(e){return f.Bc(i),f.ic(2).pageChanged(e)})),f.Vb()}if(2&e){var a=f.ic(2);f.oc("pageSize",a.pageSize)("attributes",a.memberAttributes)("selection",a.selectionMember)}}function Le(e,t){if(1&e){var i=f.Xb();f.Wb(0,"mat-tab",2),f.Wb(1,"button",3),f.ec("click",(function(){return f.Bc(i),f.ic().onAddAttMember()})),f.Lc(2),f.jc(3,"translate"),f.Vb(),f.Wb(4,"button",4),f.ec("click",(function(){return f.Bc(i),f.ic().onSaveMember()})),f.Lc(5),f.jc(6,"translate"),f.Vb(),f.Jc(7,ke,2,3,"perun-web-apps-attributes-list",5),f.Vb()}if(2&e){var a=f.ic();f.oc("label",a.member.user.firstName+" "+a.member.user.lastName+" (member)"),f.Cb(2),f.Nc(" ",f.kc(3,5,"SHARED_LIB.PERUN.SERVICES_CONFIGURATIONS.ADD")," "),f.Cb(2),f.oc("disabled",0===a.selectionMember.selected.length),f.Cb(1),f.Nc(" ",f.kc(6,7,"SHARED_LIB.PERUN.SERVICES_CONFIGURATIONS.SAVE")," "),f.Cb(2),f.oc("ngIf",!!a.memberAttributes)}}var Ve,Fe=((Ve=function(){function e(t,i,a){_classCallCheck(this,e),this.attributesManager=t,this.tableConfigService=i,this.dialog=a,this.selectionFacility=new o.c(!0,[]),this.selectionResource=new o.c(!0,[]),this.selectionGroup=new o.c(!0,[]),this.selectionMember=new o.c(!0,[]),this.showTab=0,this.tableId=l.m}return _createClass(e,[{key:"ngOnInit",value:function(){this.pageSize=this.tableConfigService.getTablePageSize(this.tableId),this.loadFacilityAttributes()}},{key:"ngOnChanges",value:function(e){var t=this;e.service?this.reloadAll():e.resource?void 0===e.resource.currentValue?(this.resourceAttributes=void 0,this.showTab=0):(this.showTab=1,this.loadResourceAttributes()):e.group?void 0===e.group.currentValue?(this.groupAttributes=void 0,this.showTab=1):(this.showTab=2,this.attributesManager.getGroupAttributes(this.group.id).subscribe((function(e){return t.groupAttributes=e}))):e.member&&(void 0===e.member.currentValue?(this.memberAttributes=void 0,this.showTab=2):(this.showTab=3,this.attributesManager.getMemberAttributes(this.member.id).subscribe((function(e){return t.memberAttributes=e}))))}},{key:"loadResourceAttributes",value:function(){var e=this;"NOT_SELECTED"===this.service?this.attributesManager.getResourceAttributes(this.resource.id).subscribe((function(t){return e.resourceAttributes=t})):"ALL"===this.service?this.attributesManager.getRequiredAttributesResource(this.resource.id).subscribe((function(t){return e.resourceAttributes=t})):this.attributesManager.getRequiredAttributesResourceService(this.service.id,this.resource.id).subscribe((function(t){return e.resourceAttributes=t}))}},{key:"loadFacilityAttributes",value:function(){var e=this;"NOT_SELECTED"===this.service?this.attributesManager.getFacilityAttributes(this.facility.id).subscribe((function(t){return e.facilityAttributes=t})):"ALL"===this.service?this.attributesManager.getRequiredAttributesFacility(this.facility.id).subscribe((function(t){return e.facilityAttributes=t})):this.attributesManager.getRequiredAttributesFacilityService(this.service.id,this.facility.id).subscribe((function(t){return e.facilityAttributes=t}))}},{key:"reloadAll",value:function(){this.loadFacilityAttributes(),void 0!==this.resource&&this.loadResourceAttributes()}},{key:"pageChanged",value:function(e){this.pageSize=e.pageSize,this.tableConfigService.setTablePageSize(this.tableId,e.pageSize)}},{key:"onAddAttFacility",value:function(){var e=this,t=Object(r.k)();t.width="1050px",t.data={entityId:this.facility.id,entity:"facility",notEmptyAttributes:this.facilityAttributes,style:"facility-theme"},this.dialog.open(J.b,t).afterClosed().subscribe((function(t){"saved"===t&&e.reloadAll()}))}},{key:"onSaveFacility",value:function(){var e=this;this.facilityAlist.updateMapAttributes(),this.dialog.open(J.c,{width:"450px",data:{entityId:this.facility.id,entity:"facility",attributes:this.selectionFacility.selected}}).afterClosed().subscribe((function(t){t&&(e.selectionFacility.clear(),e.ngOnInit())}))}},{key:"onAddAttResource",value:function(){var e=this,t=Object(r.k)();t.width="1050px",t.data={entityId:this.resource.id,entity:"resource",notEmptyAttributes:this.resourceAttributes,style:"facility-theme"},this.dialog.open(J.b,t).afterClosed().subscribe((function(t){"saved"===t&&e.reloadAll()}))}},{key:"onSaveResource",value:function(){var e=this;this.resourceAList.updateMapAttributes(),this.dialog.open(J.c,{width:"450px",data:{entityId:this.resource.id,entity:"resource",attributes:this.selectionResource.selected}}).afterClosed().subscribe((function(t){t&&(e.selectionResource.clear(),e.ngOnInit())}))}},{key:"onAddAttGroup",value:function(){var e=this,t=Object(r.k)();t.width="1050px",t.data={entityId:this.group.id,entity:"group",notEmptyAttributes:this.groupAttributes,style:"facility-theme"},this.dialog.open(J.b,t).afterClosed().subscribe((function(t){"saved"===t&&e.reloadAll()}))}},{key:"onSaveGroup",value:function(){var e=this;this.groupAList.updateMapAttributes(),this.dialog.open(J.c,{width:"450px",data:{entityId:this.group.id,entity:"group",attributes:this.selectionGroup.selected}}).afterClosed().subscribe((function(t){t&&(e.selectionGroup.clear(),e.ngOnInit())}))}},{key:"onAddAttMember",value:function(){var e=this,t=Object(r.k)();t.width="1050px",t.data={entityId:this.member.id,entity:"member",notEmptyAttributes:this.memberAttributes,style:"facility-theme"},this.dialog.open(J.b,t).afterClosed().subscribe((function(t){"saved"===t&&e.reloadAll()}))}},{key:"onSaveMember",value:function(){var e=this;this.memberAList.updateMapAttributes(),this.dialog.open(J.c,{width:"450px",data:{entityId:this.member.id,entity:"member",attributes:this.selectionMember.selected}}).afterClosed().subscribe((function(t){t&&(e.selectionMember.clear(),e.ngOnInit())}))}}]),e}()).\u0275fac=function(e){return new(e||Ve)(f.Qb(s.c),f.Qb(l.bb),f.Qb(p.b))},Ve.\u0275cmp=f.Kb({type:Ve,selectors:[["perun-web-apps-service-configurator"]],viewQuery:function(e,t){var i;1&e&&(f.Sc(me,!0),f.Sc(ye,!0),f.Sc(Ie,!0),f.Sc(ve,!0)),2&e&&(f.wc(i=f.fc())&&(t.facilityAlist=i.first),f.wc(i=f.fc())&&(t.resourceAList=i.first),f.wc(i=f.fc())&&(t.groupAList=i.first),f.wc(i=f.fc())&&(t.memberAList=i.first))},inputs:{facility:"facility",service:"service",resource:"resource",group:"group",member:"member"},features:[f.Ab],decls:13,vars:14,consts:[[2,"min-height","500px"],[3,"dynamicHeight","selectedIndex","selectedIndexChange"],[3,"label"],["mat-flat-button","","color","accent",1,"mr-2","mt-3",3,"click"],["mat-flat-button","","color","accent",1,"mr-2","mt-3",3,"disabled","click"],[3,"pageSize","attributes","selection","page",4,"ngIf"],[3,"label",4,"ngIf"],[3,"pageSize","attributes","selection","page"],["FacilityAList",""],["ResourceAList",""],["GroupAList",""],["MemberAList",""]],template:function(e,t){1&e&&(f.Wb(0,"div",0),f.Wb(1,"mat-tab-group",1),f.ec("selectedIndexChange",(function(e){return t.showTab=e})),f.Wb(2,"mat-tab",2),f.Wb(3,"button",3),f.ec("click",(function(){return t.onAddAttFacility()})),f.Lc(4),f.jc(5,"translate"),f.Vb(),f.Wb(6,"button",4),f.ec("click",(function(){return t.onSaveFacility()})),f.Lc(7),f.jc(8,"translate"),f.Vb(),f.Jc(9,Ce,2,3,"perun-web-apps-attributes-list",5),f.Vb(),f.Jc(10,Te,8,9,"mat-tab",6),f.Jc(11,Ee,8,9,"mat-tab",6),f.Jc(12,Le,8,9,"mat-tab",6),f.Vb(),f.Vb()),2&e&&(f.Cb(1),f.oc("dynamicHeight",!0)("selectedIndex",t.showTab),f.Cb(1),f.oc("label",t.facility.name+" (facility)"),f.Cb(2),f.Nc(" ",f.kc(5,10,"SHARED_LIB.PERUN.SERVICES_CONFIGURATIONS.ADD")," "),f.Cb(2),f.oc("disabled",0===t.selectionFacility.selected.length),f.Cb(1),f.Nc(" ",f.kc(8,12,"SHARED_LIB.PERUN.SERVICES_CONFIGURATIONS.SAVE")," "),f.Cb(2),f.oc("ngIf",!!t.facilityAttributes),f.Cb(1),f.oc("ngIf",!!t.resource),f.Cb(1),f.oc("ngIf",!!t.group),f.Cb(1),f.oc("ngIf",!!t.member))},directives:[ge.c,ge.a,g.b,a.t,q.a],pipes:[v.d],styles:[""]}),Ve),we=i("j+u3");function _e(e,t){if(1&e){var i=f.Xb();f.Wb(0,"mat-option",10),f.ec("onSelectionChange",(function(){f.Bc(i);var e=t.$implicit;return f.ic(3).onSelectedService(e)})),f.Lc(1),f.Vb()}if(2&e){var a=t.$implicit;f.oc("value",a),f.Cb(1),f.Nc(" ",a.name," ")}}function Oe(e,t){if(1&e){var i=f.Xb();f.Wb(0,"mat-form-field",6),f.Wb(1,"input",7),f.ec("keyup",(function(e){return f.Bc(i),f.ic(2).updatedSerVal(e)})),f.jc(2,"translate"),f.Vb(),f.Wb(3,"mat-autocomplete",8,9),f.Wb(5,"mat-option",10),f.ec("onSelectionChange",(function(){return f.Bc(i),f.ic(2).onSelectedService("NOT_SELECTED")})),f.Lc(6),f.jc(7,"translate"),f.Vb(),f.Wb(8,"mat-option",10),f.ec("onSelectionChange",(function(){return f.Bc(i),f.ic(2).onSelectedService("ALL")})),f.Lc(9),f.jc(10,"translate"),f.Vb(),f.Jc(11,_e,2,2,"mat-option",11),f.jc(12,"async"),f.Vb(),f.Vb()}if(2&e){var a=f.xc(4),c=f.ic(2);f.Cb(1),f.pc("placeholder",f.kc(2,9,"FACILITY_DETAIL.SERVICE_CONFIG.SERVICE_SELECT")),f.oc("formControl",c.serviceField)("matAutocomplete",a),f.Cb(2),f.oc("displayWith",c.serviceDisplayFn.bind(c)),f.Cb(2),f.oc("value","NOT_SELECTED"),f.Cb(1),f.Nc(" ",f.kc(7,11,"FACILITY_DETAIL.SERVICE_CONFIG.NOT_SELECTED")," "),f.Cb(2),f.oc("value","ALL"),f.Cb(1),f.Nc(" ",f.kc(10,13,"FACILITY_DETAIL.SERVICE_CONFIG.ALL")," "),f.Cb(2),f.oc("ngForOf",f.kc(12,15,c.filteredServices))}}function Re(e,t){if(1&e){var i=f.Xb();f.Wb(0,"mat-option",10),f.ec("onSelectionChange",(function(){f.Bc(i);var e=t.$implicit;return f.ic(3).onSelectedResource(e)})),f.Lc(1),f.Vb()}if(2&e){var a=t.$implicit;f.oc("value",a),f.Cb(1),f.Nc(" ",a.name," ")}}function Me(e,t){if(1&e){var i=f.Xb();f.Wb(0,"mat-form-field",6),f.Wb(1,"input",12),f.ec("keyup",(function(e){return f.Bc(i),f.ic(2).updatedResVal(e)})),f.jc(2,"translate"),f.Vb(),f.Wb(3,"mat-autocomplete",8,9),f.Jc(5,Re,2,2,"mat-option",11),f.jc(6,"async"),f.Vb(),f.Vb()}if(2&e){var a=f.xc(4),c=f.ic(2);f.Cb(1),f.pc("placeholder",f.kc(2,5,"FACILITY_DETAIL.SERVICE_CONFIG.RES_SELECT")),f.oc("matAutocomplete",a)("formControl",c.resourceField),f.Cb(2),f.oc("displayWith",c.resourceDisplayFn.bind(c)),f.Cb(2),f.oc("ngForOf",f.kc(6,7,c.filteredResources))}}function Ne(e,t){if(1&e){var i=f.Xb();f.Wb(0,"mat-option",10),f.ec("onSelectionChange",(function(){f.Bc(i);var e=t.$implicit;return f.ic(3).onSelectedGroup(e)})),f.Lc(1),f.Vb()}if(2&e){var a=t.$implicit;f.oc("value",a),f.Cb(1),f.Nc(" ",a.name," ")}}function De(e,t){if(1&e){var i=f.Xb();f.Wb(0,"mat-form-field",6),f.Wb(1,"input",12),f.ec("keyup",(function(e){return f.Bc(i),f.ic(2).updatedGroupVal(e)})),f.jc(2,"translate"),f.Vb(),f.Wb(3,"mat-autocomplete",13,9),f.Jc(5,Ne,2,2,"mat-option",11),f.jc(6,"async"),f.Vb(),f.Vb()}if(2&e){var a=f.xc(4),c=f.ic(2);f.Cb(1),f.pc("placeholder",f.kc(2,5,"FACILITY_DETAIL.SERVICE_CONFIG.GROUP_SELECT")),f.oc("matAutocomplete",a)("formControl",c.groupField),f.Cb(2),f.oc("displayWith",c.groupDisplayFn.bind(c)),f.Cb(2),f.oc("ngForOf",f.kc(6,7,c.filteredGroups))}}function We(e,t){if(1&e){var i=f.Xb();f.Wb(0,"mat-option",10),f.ec("onSelectionChange",(function(){f.Bc(i);var e=t.$implicit;return f.ic(3).onSelectedMember(e)})),f.Lc(1),f.jc(2,"userFullName"),f.Vb()}if(2&e){var a=t.$implicit;f.oc("value",a),f.Cb(1),f.Nc(" ",f.kc(2,2,a.user)," ")}}function je(e,t){if(1&e&&(f.Wb(0,"mat-form-field",6),f.Rb(1,"input",14),f.jc(2,"translate"),f.Wb(3,"mat-autocomplete",8,9),f.Jc(5,We,3,4,"mat-option",11),f.jc(6,"async"),f.Vb(),f.Vb()),2&e){var i=f.xc(4),a=f.ic(2);f.Cb(1),f.pc("placeholder",f.kc(2,5,"FACILITY_DETAIL.SERVICE_CONFIG.MEMBER_SELECT")),f.oc("formControl",a.memberField)("matAutocomplete",i),f.Cb(2),f.oc("displayWith",a.memberDisplayFn.bind(a)),f.Cb(2),f.oc("ngForOf",f.kc(6,7,a.filteredMembers))}}function ze(e,t){if(1&e){var i=f.Xb();f.Wb(0,"div",3),f.Jc(1,Oe,13,17,"mat-form-field",4),f.Wb(2,"mat-checkbox",5),f.ec("change",(function(e){return f.Bc(i),f.ic().onOfferAllServices(e)})),f.Lc(3),f.jc(4,"translate"),f.Vb(),f.Jc(5,Me,7,9,"mat-form-field",4),f.Jc(6,De,7,9,"mat-form-field",4),f.Jc(7,je,7,9,"mat-form-field",4),f.Vb()}if(2&e){var a=f.ic();f.Cb(1),f.oc("ngIf",void 0!==a.services),f.Cb(2),f.Nc(" ",f.kc(4,5,"FACILITY_DETAIL.SERVICE_CONFIG.ALL_SERVICES")," "),f.Cb(2),f.oc("ngIf",void 0!==a.resources&&0!=a.resources.length),f.Cb(1),f.oc("ngIf",void 0!==a.selectedResource&&void 0!==a.groups&&0!=a.groups.length),f.Cb(1),f.oc("ngIf",void 0!==a.selectedGroup&&void 0!==a.members&&0!==a.members.length)}}function Ge(e,t){if(1&e&&f.Rb(0,"perun-web-apps-service-configurator",15),2&e){var i=f.ic();f.oc("facility",i.facility)("resource",i.selectedResource)("group",i.selectedGroup)("service",i.selectedService)("member",i.selectedMember)}}var Be,Ye=((Be=function(){function e(t,i,a,c,n,s,r){var l=this;_classCallCheck(this,e),this.route=t,this.facilityManager=i,this.resourceManager=a,this.serviceManager=c,this.membersManager=n,this.namePipe=s,this.translate=r,this.selectedService="NOT_SELECTED",this.attrNames=[],this.serviceField=new re.f,this.resourceField=new re.f,this.groupField=new re.f,this.memberField=new re.f,this.translate.get("FACILITY_DETAIL.SERVICE_CONFIG.ALL").subscribe((function(e){return l.serviceAllTranslation=e})),this.translate.get("FACILITY_DETAIL.SERVICE_CONFIG.NOT_SELECTED").subscribe((function(e){return l.serviceNotSelectedTranslation=e}))}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.route.parent.params.subscribe((function(t){e.facilityManager.getFacilityById(t.facilityId).subscribe((function(t){e.facility=t,e.facilityManager.getAssignedResourcesForFacility(t.id).subscribe((function(t){return e.resources=t})),e.serviceManager.getAssignedServices(t.id).subscribe((function(t){return e.services=t}))}))})),this.filteredServices=this.serviceField.valueChanges.pipe(Object(le.a)(""),Object(oe.a)((function(t){return e._filterServices(t)}))),this.filteredResources=this.resourceField.valueChanges.pipe(Object(le.a)(""),Object(oe.a)((function(t){return e._filterResources(t)}))),this.filteredGroups=this.groupField.valueChanges.pipe(Object(le.a)(""),Object(oe.a)((function(t){return e._filterGroups(t)}))),this.filteredMembers=this.memberField.valueChanges.pipe(Object(le.a)(""),Object(oe.a)((function(t){return e._filterMembers(t)})))}},{key:"onSelectedService",value:function(e){this.selectedService=e}},{key:"onSelectedResource",value:function(e){var t=this;this.selectedResource=e,void 0!==this.selectedResource?(this.resourceManager.getAssignedGroups(this.selectedResource.id).subscribe((function(e){return t.groups=e})),this.selectedGroup=void 0,this.selectedMember=void 0):this.groups=void 0}},{key:"onOfferAllServices",value:function(e){var t=this;e.checked||this.serviceManager.getAssignedServices(this.facility.id).subscribe((function(e){return t.services=e}))}},{key:"onSelectedGroup",value:function(e){var t=this;this.selectedGroup=e,void 0!==this.selectedGroup?(this.membersManager.getCompleteRichMembersForGroup(this.selectedGroup.id,this.attrNames).subscribe((function(e){return t.members=e})),this.selectedMember=void 0):this.members=void 0}},{key:"onSelectedMember",value:function(e){this.selectedMember=e}},{key:"_filterServices",value:function(e){var t=e.toString().toLowerCase();return this.services.filter((function(e){return e.name.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").includes(t)}))}},{key:"_filterResources",value:function(e){var t=e.toString().toLowerCase();return this.resources.filter((function(e){return e.name.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").includes(t)}))}},{key:"_filterGroups",value:function(e){var t=e.toString().toLowerCase();return this.groups.filter((function(e){return e.name.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").includes(t)}))}},{key:"_filterMembers",value:function(e){var t=this,i=e.toString().toLowerCase();return this.members.filter((function(e){return t.namePipe.transform(e.user).toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").includes(i)}))}},{key:"serviceDisplayFn",value:function(e){if(null!==e)return"ALL"===e?this.serviceAllTranslation:"NOT_SELECTED"===e?this.serviceNotSelectedTranslation:e.name}},{key:"resourceDisplayFn",value:function(e){if(null!==e)return e.name}},{key:"groupDisplayFn",value:function(e){if(null!==e)return e.name}},{key:"memberDisplayFn",value:function(e){if(null!==e)return this.namePipe.transform(e.user)}},{key:"updatedSerVal",value:function(e){""===e.target.value&&(this.selectedService="NOT_SELECTED")}},{key:"updatedResVal",value:function(e){""===e.target.value&&(this.groups=void 0,this.members=void 0)}},{key:"updatedGroupVal",value:function(e){""===e.target.value&&(this.members=void 0)}},{key:"updatedMemVal",value:function(e){}}]),e}()).\u0275fac=function(e){return new(e||Be)(f.Qb(c.a),f.Qb(s.g),f.Qb(s.l),f.Qb(s.m),f.Qb(H.h),f.Qb(ue.d),f.Qb(v.e))},Be.\u0275cmp=f.Kb({type:Be,selectors:[["app-facility-service-config"]],decls:6,vars:5,consts:[[1,"page-subtitle"],["class","col-12 col-lg-6 mb-2",4,"ngIf"],[3,"facility","resource","group","service","member",4,"ngIf"],[1,"col-12","col-lg-6","mb-2"],["class","w-100",4,"ngIf"],[3,"change"],[1,"w-100"],["type","text","matInput","",3,"placeholder","formControl","matAutocomplete","keyup"],["autoActiveFirstOption","",3,"displayWith"],["auto","matAutocomplete"],[3,"value","onSelectionChange"],[3,"value","onSelectionChange",4,"ngFor","ngForOf"],["type","text","matInput","",3,"placeholder","matAutocomplete","formControl","keyup"],["autoActiveFirstOption","",3,"ngClass","displayWith"],["type","text","matInput","",3,"placeholder","formControl","matAutocomplete"],[3,"facility","resource","group","service","member"]],template:function(e,t){1&e&&(f.Wb(0,"div"),f.Wb(1,"h1",0),f.Lc(2),f.jc(3,"translate"),f.Vb(),f.Jc(4,ze,8,7,"div",1),f.Jc(5,Ge,1,5,"perun-web-apps-service-configurator",2),f.Vb()),2&e&&(f.Cb(2),f.Mc(f.kc(3,3,"FACILITY_DETAIL.SERVICE_CONFIG.TITLE")),f.Cb(2),f.oc("ngIf",!!t.facility),f.Cb(1),f.oc("ngIf",!!t.facility))},directives:[a.t,be.a,fe.c,pe.b,re.c,de.d,re.q,re.g,de.a,he.n,a.s,a.q,Fe],pipes:[v.d,a.b,we.a],styles:[""]}),Be),Qe=i("Iydx"),Pe=i("NU+N");function Ue(e,t){if(1&e&&f.Rb(0,"app-managers-page",1),2&e){var i=f.ic();f.oc("complementaryObject",i.facility)("complementaryObjectType",i.type)("theme",i.theme)("availableRoles",i.availableRoles)}}var xe,He=((xe=function(){function e(t,i){_classCallCheck(this,e),this.facilityService=t,this.route=i,this.availableRoles=[Qe.a.FACILITYADMIN],this.selected="user",this.type="Facility",this.theme="facility-theme"}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.route.parent.parent.params.subscribe((function(t){e.facilityService.getFacilityById(t.facilityId).subscribe((function(t){e.facility=t}))}))}}]),e}()).\u0275fac=function(e){return new(e||xe)(f.Qb(s.g),f.Qb(c.a))},xe.\u0275cmp=f.Kb({type:xe,selectors:[["app-perun-web-apps-facility-settings-managers"]],hostVars:2,hostBindings:function(e,t){2&e&&f.Gb("router-component",!0)},decls:1,vars:1,consts:[[3,"complementaryObject","complementaryObjectType","theme","availableRoles",4,"ngIf"],[3,"complementaryObject","complementaryObjectType","theme","availableRoles"]],template:function(e,t){1&e&&f.Jc(0,Ue,1,4,"app-managers-page",0),2&e&&f.oc("ngIf",t.facility)},directives:[a.t,Pe.a],styles:[""]}),xe),Je=i("/nwi"),Xe=i("Dkjx"),Ke=i("pgvo");function qe(e,t){1&e&&f.Rb(0,"mat-spinner",7)}function $e(e,t){if(1&e){var i=f.Xb();f.Wb(0,"app-perun-web-apps-destination-list",8),f.ec("page",(function(e){return f.Bc(i),f.ic().pageChanged(e)})),f.Vb()}if(2&e){var a=f.ic();f.oc("pageSize",a.pageSize)("filterValue",a.filterValue)("destinations",a.destinations)("selection",a.selected)("displayedColumns",a.displayedColumns)}}var Ze,et=((Ze=function(){function e(t,i,a,c,n,s,r){_classCallCheck(this,e),this.dialog=t,this.facilitiesManager=i,this.servicesManager=a,this.tableConfigService=c,this.translate=n,this.notificator=s,this.route=r,this.selected=new o.c(!0,[]),this.displayedColumns=["select","destinationId","service","destination","type","propagationType"],this.filterValue="",this.tableId=l.v}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.pageSize=this.tableConfigService.getTablePageSize(this.tableId),this.loading=!0,this.route.parent.params.subscribe((function(t){e.facilitiesManager.getFacilityById(t.facilityId).subscribe((function(t){e.facility=t,e.refreshTable()}))}))}},{key:"refreshTable",value:function(){var e=this;this.loading=!0,this.servicesManager.getAllRichDestinationsForFacility(this.facility.id).subscribe((function(t){e.destinations=t,e.selected.clear(),e.loading=!1}))}},{key:"addDestination",value:function(){var e=this,t=Object(r.k)();t.width="600px",t.data={facility:this.facility,theme:"facility-theme"},this.dialog.open(Xe.a,t).afterClosed().subscribe((function(t){t&&e.translate.get("FACILITY_DETAIL.SERVICES_DESTINATIONS.ADD_SUCCESS").subscribe((function(t){e.refreshTable(),e.notificator.showSuccess(t)}))}))}},{key:"removeDestination",value:function(){var e=this,t=Object(r.k)();t.width="600px",t.data={destinations:this.selected.selected,theme:"facility-theme"},this.dialog.open(Je.a,t).afterClosed().subscribe((function(t){t&&(e.loading=!0,e.deleteDestinations(e.selected.selected))}))}},{key:"applyFilter",value:function(e){this.filterValue=e}},{key:"pageChanged",value:function(e){console.log(e.pageSize),this.pageSize=e.pageSize,this.tableConfigService.setTablePageSize(this.tableId,e.pageSize)}},{key:"deleteDestinations",value:function(e){var t=this;if(0===e.length)this.translate.get("FACILITY_DETAIL.SERVICES_DESTINATIONS.REMOVE_SUCCESS").subscribe((function(e){t.refreshTable(),t.notificator.showSuccess(e)}));else{var i=e[0];this.servicesManager.removeDestination(i.service.id,i.facility.id,i.destination,i.type).subscribe((function(){e.shift(),t.deleteDestinations(e)}))}}}]),e}()).id="FacilityServicesDestinationsComponent",Ze.\u0275fac=function(e){return new(e||Ze)(f.Qb(p.b),f.Qb(s.g),f.Qb(s.m),f.Qb(l.bb),f.Qb(v.e),f.Qb(H.j),f.Qb(c.a))},Ze.\u0275cmp=f.Kb({type:Ze,selectors:[["app-perun-web-apps-facility-services-destinations"]],hostVars:2,hostBindings:function(e,t){2&e&&f.Gb("router-component",!0)},decls:14,vars:13,consts:[[1,"page-subtitle"],[3,"refresh"],["mat-flat-button","","color","accent",3,"click"],["mat-flat-button","","color","warn",1,"ml-2",3,"disabled","click"],[3,"placeholder","filter"],["class","ml-auto mr-auto",4,"ngIf"],[3,"pageSize","filterValue","destinations","selection","displayedColumns","page",4,"ngIf"],[1,"ml-auto","mr-auto"],[3,"pageSize","filterValue","destinations","selection","displayedColumns","page"]],template:function(e,t){1&e&&(f.Wb(0,"div"),f.Wb(1,"h1",0),f.Lc(2),f.jc(3,"translate"),f.Vb(),f.Wb(4,"perun-web-apps-refresh-button",1),f.ec("refresh",(function(){return t.refreshTable()})),f.Vb(),f.Wb(5,"button",2),f.ec("click",(function(){return t.addDestination()})),f.Lc(6),f.jc(7,"translate"),f.Vb(),f.Wb(8,"button",3),f.ec("click",(function(){return t.removeDestination()})),f.Lc(9),f.jc(10,"translate"),f.Vb(),f.Wb(11,"perun-web-apps-immediate-filter",4),f.ec("filter",(function(e){return t.applyFilter(e)})),f.Vb(),f.Jc(12,qe,1,0,"mat-spinner",5),f.Jc(13,$e,1,5,"app-perun-web-apps-destination-list",6),f.Vb()),2&e&&(f.Cb(2),f.Mc(f.kc(3,7,"FACILITY_DETAIL.SERVICES_DESTINATIONS.TITLE")),f.Cb(4),f.Nc(" ",f.kc(7,9,"FACILITY_DETAIL.SERVICES_DESTINATIONS.ADD")," "),f.Cb(2),f.oc("disabled",0===t.selected.selected.length),f.Cb(1),f.Nc(" ",f.kc(10,11,"FACILITY_DETAIL.SERVICES_DESTINATIONS.REMOVE")," "),f.Cb(2),f.oc("placeholder","FACILITY_DETAIL.SERVICES_DESTINATIONS.FILTER"),f.Cb(1),f.oc("ngIf",t.loading),f.Cb(1),f.oc("ngIf",!t.loading))},directives:[h.a,g.b,m.a,a.t,y.c,Ke.a],pipes:[v.d],styles:[""]}),Ze),tt=i("st5j"),it=i("noDS"),at=i("5kIe");function ct(e,t){if(1&e){var i=f.Xb();f.Wb(0,"perun-web-apps-refresh-button",7),f.ec("refresh",(function(){return f.Bc(i),f.ic().refreshTable()})),f.Vb()}}function nt(e,t){if(1&e){var i=f.Xb();f.Wb(0,"perun-web-apps-immediate-filter",8),f.ec("filter",(function(e){return f.Bc(i),f.ic().applyFilter(e)})),f.Vb()}2&e&&f.oc("placeholder","VO_MANAGEMENT.FILTER_PLACEHOLDER")}function st(e,t){1&e&&f.Rb(0,"mat-spinner",9)}function rt(e,t){if(1&e&&f.Rb(0,"app-owners-list",10),2&e){var i=f.ic();f.oc("filterValue",i.filterValue)("owners",i.owners)("selection",i.selection)}}var lt,ot=((lt=function(){function e(t,i,a){_classCallCheck(this,e),this.facilitiesManagerService=t,this.route=i,this.dialog=a,this.owners=[],this.selection=new o.c(!0,[])}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.route.parent.parent.params.subscribe((function(t){e.facilityId=t.facilityId,e.refreshTable()}))}},{key:"refreshTable",value:function(){var e=this;this.loading=!0,this.selection.clear(),this.facilitiesManagerService.getFacilityOwners(this.facilityId).subscribe((function(t){e.owners=t,e.loading=!1}))}},{key:"applyFilter",value:function(e){this.filterValue=e}},{key:"onCreate",value:function(){var e=this,t=Object(r.k)();t.width="800px",t.data={theme:"facility-theme",facilityId:this.facilityId,forbiddenOwners:this.owners.map((function(e){return e.id}))},this.dialog.open(tt.a,t).afterClosed().subscribe((function(t){t&&e.refreshTable()}))}},{key:"onRemove",value:function(){var e=this,t=Object(r.k)();t.width="600px",t.data={theme:"facility-theme",owners:this.selection.selected,facilityId:this.facilityId},this.dialog.open(it.a,t).afterClosed().subscribe((function(t){t&&e.refreshTable()}))}}]),e}()).\u0275fac=function(e){return new(e||lt)(f.Qb(s.g),f.Qb(c.a),f.Qb(p.b))},lt.\u0275cmp=f.Kb({type:lt,selectors:[["app-facility-settings-owners"]],decls:13,vars:14,consts:[[1,"page-subtitle"],[3,"refresh",4,"ngIf"],["color","accent","mat-flat-button","",1,"mr-2",3,"click"],["color","warn","mat-flat-button","",1,"mr-2",3,"disabled","click"],[3,"placeholder","filter",4,"ngIf"],["class","ml-auto mr-auto",4,"ngIf"],[3,"filterValue","owners","selection",4,"ngIf"],[3,"refresh"],[3,"placeholder","filter"],[1,"ml-auto","mr-auto"],[3,"filterValue","owners","selection"]],template:function(e,t){1&e&&(f.Wb(0,"h1",0),f.Lc(1),f.jc(2,"translate"),f.Vb(),f.Jc(3,ct,1,0,"perun-web-apps-refresh-button",1),f.Wb(4,"button",2),f.ec("click",(function(){return t.onCreate()})),f.Lc(5),f.jc(6,"translate"),f.Vb(),f.Wb(7,"button",3),f.ec("click",(function(){return t.onRemove()})),f.Lc(8),f.jc(9,"translate"),f.Vb(),f.Jc(10,nt,1,1,"perun-web-apps-immediate-filter",4),f.Jc(11,st,1,0,"mat-spinner",5),f.Jc(12,rt,1,3,"app-owners-list",6)),2&e&&(f.Cb(1),f.Mc(f.kc(2,8,"FACILITY_DETAIL.SETTINGS.OWNERS.TITLE")),f.Cb(2),f.oc("ngIf",!t.loading),f.Cb(2),f.Nc(" ",f.kc(6,10,"FACILITY_DETAIL.SETTINGS.OWNERS.ADD"),"\n"),f.Cb(2),f.oc("disabled",0===t.selection.selected.length),f.Cb(1),f.Nc(" ",f.kc(9,12,"FACILITY_DETAIL.SETTINGS.OWNERS.DELETE"),"\n"),f.Cb(2),f.oc("ngIf",!t.loading),f.Cb(1),f.oc("ngIf",t.loading),f.Cb(1),f.oc("ngIf",!t.loading))},directives:[a.t,g.b,h.a,m.a,y.c,at.a],pipes:[v.d],styles:[""]}),lt),ut=i("dnAU"),bt=i("vUrr"),ft=i("gdiH");function pt(e,t){1&e&&f.Rb(0,"mat-spinner",7)}function dt(e,t){if(1&e){var i=f.Xb();f.Wb(0,"app-hosts-list",8),f.ec("page",(function(e){return f.Bc(i),f.ic().pageChanged(e)})),f.Vb()}if(2&e){var a=f.ic();f.oc("pageSize",a.pageSize)("filterValue",a.filterValue)("hosts",a.hosts)("selection",a.selected)("facilityId",a.facilityId)}}var ht,gt=((ht=function(){function e(t,i,a,c){_classCallCheck(this,e),this.dialog=t,this.facilitiesManager=i,this.tableConfigService=a,this.route=c,this.hosts=[],this.selected=new o.c(!0,[]),this.filterValue="",this.tableId=l.r}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.pageSize=this.tableConfigService.getTablePageSize(this.tableId),this.route.parent.params.subscribe((function(t){e.facilityId=t.facilityId,e.facilitiesManager.getFacilityById(e.facilityId).subscribe((function(t){e.facility=t,e.refreshTable()}))}))}},{key:"refreshTable",value:function(){var e=this;this.loading=!0,this.facilitiesManager.getHosts(this.facilityId).subscribe((function(t){e.hosts=t,e.selected.clear(),e.loading=!1}))}},{key:"addHost",value:function(){var e=this,t=Object(r.k)();t.width="600px",t.data={facilityId:this.facility.id,facilityName:this.facility.name,theme:"facility-theme"},this.dialog.open(ut.a,t).afterClosed().subscribe((function(t){t&&e.refreshTable()}))}},{key:"removeHost",value:function(){var e=this,t=Object(r.k)();t.width="600px",t.data={facilityId:this.facility.id,theme:"facility-theme",hosts:this.selected.selected},this.dialog.open(bt.a,t).afterClosed().subscribe((function(t){t&&e.refreshTable()}))}},{key:"applyFilter",value:function(e){this.filterValue=e}},{key:"pageChanged",value:function(e){this.pageSize=e.pageSize,this.tableConfigService.setTablePageSize(this.tableId,e.pageSize)}}]),e}()).\u0275fac=function(e){return new(e||ht)(f.Qb(p.b),f.Qb(s.g),f.Qb(l.bb),f.Qb(c.a))},ht.\u0275cmp=f.Kb({type:ht,selectors:[["app-facility-hosts"]],decls:14,vars:13,consts:[[1,"page-subtitle"],[3,"refresh"],["mat-flat-button","","color","accent",3,"click"],["mat-flat-button","","color","warn",1,"ml-2",3,"disabled","click"],[3,"placeholder","filter"],["class","ml-auto mr-auto",4,"ngIf"],[3,"pageSize","filterValue","hosts","selection","facilityId","page",4,"ngIf"],[1,"ml-auto","mr-auto"],[3,"pageSize","filterValue","hosts","selection","facilityId","page"]],template:function(e,t){1&e&&(f.Wb(0,"div"),f.Wb(1,"h1",0),f.Lc(2),f.jc(3,"translate"),f.Vb(),f.Wb(4,"perun-web-apps-refresh-button",1),f.ec("refresh",(function(){return t.refreshTable()})),f.Vb(),f.Wb(5,"button",2),f.ec("click",(function(){return t.addHost()})),f.Lc(6),f.jc(7,"translate"),f.Vb(),f.Wb(8,"button",3),f.ec("click",(function(){return t.removeHost()})),f.Lc(9),f.jc(10,"translate"),f.Vb(),f.Wb(11,"perun-web-apps-immediate-filter",4),f.ec("filter",(function(e){return t.applyFilter(e)})),f.Vb(),f.Jc(12,pt,1,0,"mat-spinner",5),f.Jc(13,dt,1,5,"app-hosts-list",6),f.Vb()),2&e&&(f.Cb(2),f.Mc(f.kc(3,7,"FACILITY_DETAIL.HOSTS.TITLE")),f.Cb(4),f.Nc(" ",f.kc(7,9,"FACILITY_DETAIL.HOSTS.ADD")," "),f.Cb(2),f.oc("disabled",0===t.selected.selected.length),f.Cb(1),f.Nc(" ",f.kc(10,11,"FACILITY_DETAIL.HOSTS.REMOVE")," "),f.Cb(2),f.oc("placeholder","FACILITY_DETAIL.HOSTS.FILTER"),f.Cb(1),f.oc("ngIf",t.loading),f.Cb(1),f.oc("ngIf",!t.loading))},directives:[h.a,g.b,m.a,a.t,y.c,ft.a],pipes:[v.d],styles:[""]}),ht),mt=i("77So");function yt(e,t){1&e&&f.Rb(0,"mat-spinner",5)}function It(e,t){if(1&e){var i=f.Xb();f.Wb(0,"app-perun-web-apps-blacklist-list",6),f.ec("page",(function(e){return f.Bc(i),f.ic().pageChanged(e)})),f.Vb()}if(2&e){var a=f.ic();f.oc("pageSize",a.pageSize)("filterValue",a.filterValue)("bansOnFacilitiesWithUsers",a.bansOnFacilitiesWithUsers)("selection",a.selected)}}var vt,Ct=((vt=function(){function e(t,i,a,c){_classCallCheck(this,e),this.facilitiesManager=t,this.usersManager=i,this.tableConfigService=a,this.route=c,this.bansOnFacilitiesWithUsers=[],this.selected=new o.c(!0,[]),this.filterValue="",this.tableId=l.q}return _createClass(e,[{key:"ngOnInit",value:function(){this.pageSize=this.tableConfigService.getTablePageSize(this.tableId),this.refreshTable()}},{key:"refreshTable",value:function(){var e=this;this.loading=!0,this.route.parent.parent.params.subscribe((function(t){e.facilitiesManager.getBansForFacility(t.facilityId).subscribe((function(t){var i,a=_createForOfIteratorHelper(t);try{for(a.s();!(i=a.n()).done;){var c=i.value,n=void 0;e.usersManager.getUserById(c.userId).subscribe((function(e){n=e})),e.bansOnFacilitiesWithUsers.push([c,n])}}catch(s){a.e(s)}finally{a.f()}e.selected.clear(),e.loading=!1}))}))}},{key:"applyFilter",value:function(e){this.filterValue=e}},{key:"pageChanged",value:function(e){this.pageSize=e.pageSize,this.tableConfigService.setTablePageSize(this.tableId,e.pageSize)}}]),e}()).\u0275fac=function(e){return new(e||vt)(f.Qb(s.g),f.Qb(s.o),f.Qb(l.bb),f.Qb(c.a))},vt.\u0275cmp=f.Kb({type:vt,selectors:[["app-perun-web-apps-facility-settings-blacklist"]],decls:9,vars:8,consts:[[1,"page-subtitle"],[3,"refresh"],[3,"placeholder","filter"],["class","ml-auto mr-auto",4,"ngIf"],[3,"pageSize","filterValue","bansOnFacilitiesWithUsers","selection","page",4,"ngIf"],[1,"ml-auto","mr-auto"],[3,"pageSize","filterValue","bansOnFacilitiesWithUsers","selection","page"]],template:function(e,t){1&e&&(f.Wb(0,"div"),f.Wb(1,"h1",0),f.Lc(2),f.jc(3,"translate"),f.Vb(),f.Wb(4,"perun-web-apps-refresh-button",1),f.ec("refresh",(function(){return t.refreshTable()})),f.Vb(),f.Wb(5,"perun-web-apps-immediate-filter",2),f.ec("filter",(function(e){return t.applyFilter(e)})),f.jc(6,"translate"),f.Vb(),f.Jc(7,yt,1,0,"mat-spinner",3),f.Jc(8,It,1,4,"app-perun-web-apps-blacklist-list",4),f.Vb()),2&e&&(f.Cb(2),f.Mc(f.kc(3,4,"FACILITY_DETAIL.SETTINGS.BLACKLIST.TITLE")),f.Cb(3),f.oc("placeholder",f.kc(6,6,"FACILITY_DETAIL.SETTINGS.BLACKLIST.FILTER")),f.Cb(2),f.oc("ngIf",t.loading),f.Cb(1),f.oc("ngIf",!t.loading))},directives:[h.a,m.a,a.t,y.c,mt.a],pipes:[v.d],styles:[""]}),vt),St=["list"];function Tt(e,t){if(1&e){var i=f.Xb();f.Wb(0,"perun-web-apps-attributes-list",6,7),f.ec("page",(function(e){return f.Bc(i),f.ic().pageChanged(e)})),f.Vb()}if(2&e){var a=f.ic();f.oc("pageSize",a.pageSize)("attributes",a.attributes)("selection",a.selected)}}var At,Et=((At=function(){function e(t,i,a,c,n){_classCallCheck(this,e),this.dialog=t,this.attributesManager=i,this.facilityManager=a,this.tableConfigService=c,this.route=n,this.attributes=[],this.selected=new o.c(!0,[]),this.host={beanName:"",id:0},this.tableId=l.m}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.pageSize=this.tableConfigService.getTablePageSize(this.tableId),this.route.params.subscribe((function(t){e.hostId=t.hostId,e.facilityManager.getHostById(e.hostId).subscribe((function(t){e.host=t})),e.refreshTable()}))}},{key:"refreshTable",value:function(){var e=this;this.loading=!0,this.attributesManager.getHostAttributes(this.hostId).subscribe((function(t){e.attributes=Object(r.g)(t),e.selected.clear(),e.loading=!1}))}},{key:"onSave",value:function(){var e=this;this.list.updateMapAttributes();var t=Object(r.k)();t.width="450px",t.data={entityId:this.hostId,entity:"host",attributes:this.selected.selected},this.dialog.open(J.c,t).afterClosed().subscribe((function(t){t&&e.refreshTable()}))}},{key:"addAttribute",value:function(){var e=this,t=Object(r.k)();t.width="1050px",t.data={entityId:this.hostId,entity:"host",notEmptyAttributes:this.attributes,style:"facility-theme"},this.dialog.open(K.a,t).afterClosed().subscribe((function(t){"saved"===t&&e.refreshTable()}))}},{key:"removeAttribute",value:function(){var e=this,t=Object(r.k)();t.width="450px",t.data={entityId:this.hostId,entity:"host",attributes:this.selected.selected},this.dialog.open(X.a,t).afterClosed().subscribe((function(t){t&&e.refreshTable()}))}},{key:"pageChanged",value:function(e){this.pageSize=e.pageSize,this.tableConfigService.setTablePageSize(this.tableId,e.pageSize)}}]),e}()).\u0275fac=function(e){return new(e||At)(f.Qb(p.b),f.Qb(s.c),f.Qb(s.g),f.Qb(l.bb),f.Qb(c.a))},At.\u0275cmp=f.Kb({type:At,selectors:[["app-facility-hosts-detail"]],viewQuery:function(e,t){var i;1&e&&f.Sc(St,!0),2&e&&f.wc(i=f.fc())&&(t.list=i.first)},decls:15,vars:16,consts:[[1,"page-subtitle"],[3,"refresh"],["mat-flat-button","","color","accent",1,"mr-2",3,"click"],["mat-flat-button","","color","accent",1,"mr-2",3,"disabled","click"],["mat-flat-button","","color","warn",1,"ml-2",3,"disabled","click"],[3,"pageSize","attributes","selection","page",4,"ngIf"],[3,"pageSize","attributes","selection","page"],["list",""]],template:function(e,t){1&e&&(f.Wb(0,"div"),f.Wb(1,"h1",0),f.Lc(2),f.jc(3,"translate"),f.Vb(),f.Wb(4,"perun-web-apps-refresh-button",1),f.ec("refresh",(function(){return t.refreshTable()})),f.Vb(),f.Wb(5,"button",2),f.ec("click",(function(){return t.addAttribute()})),f.Lc(6),f.jc(7,"translate"),f.Vb(),f.Wb(8,"button",3),f.ec("click",(function(){return t.onSave()})),f.Lc(9),f.jc(10,"translate"),f.Vb(),f.Wb(11,"button",4),f.ec("click",(function(){return t.removeAttribute()})),f.Lc(12),f.jc(13,"translate"),f.Vb(),f.Jc(14,Tt,2,3,"perun-web-apps-attributes-list",5),f.Vb()),2&e&&(f.Cb(2),f.Oc(" ",f.kc(3,8,"FACILITY_DETAIL.HOSTS.HOSTS_DETAIL.TITLE")," ",t.host.hostname,""),f.Cb(4),f.Nc(" ",f.kc(7,10,"FACILITY_DETAIL.HOSTS.HOSTS_DETAIL.ADD")," "),f.Cb(2),f.oc("disabled",0===t.selected.selected.length),f.Cb(1),f.Nc(" ",f.kc(10,12,"FACILITY_DETAIL.HOSTS.HOSTS_DETAIL.SAVE")," "),f.Cb(2),f.oc("disabled",0===t.selected.selected.length),f.Cb(1),f.Nc(" ",f.kc(13,14,"FACILITY_DETAIL.HOSTS.HOSTS_DETAIL.REMOVE")," "),f.Cb(2),f.oc("ngIf",!t.loading))},directives:[h.a,g.b,a.t,q.a],pipes:[v.d],styles:[""]}),At),kt=i("iT3j");function Lt(e,t){1&e&&f.Rb(0,"mat-spinner",5)}function Vt(e,t){if(1&e){var i=f.Xb();f.Wb(0,"app-security-teams-list",6),f.ec("page",(function(e){return f.Bc(i),f.ic().pageChanged(e)})),f.Vb()}if(2&e){var a=f.ic();f.oc("pageSize",a.pageSize)("filterValue",a.filterValue)("securityTeams",a.securityTeams)("selection",a.selected)}}var Ft,wt,_t=((Ft=function(){function e(t,i,a,c){_classCallCheck(this,e),this.dialog=t,this.facilitiesManager=i,this.tableConfigService=a,this.route=c,this.securityTeams=[],this.selected=new o.c(!0,[]),this.filterValue="",this.tableId=l.t}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.pageSize=this.tableConfigService.getTablePageSize(this.tableId),this.route.parent.params.subscribe((function(t){e.facilitiesManager.getFacilityById(t.facilityId).subscribe((function(t){e.facility=t,e.refreshTable()}))}))}},{key:"refreshTable",value:function(){var e=this;this.loading=!0,this.facilitiesManager.getAssignedSecurityTeams(this.facility.id).subscribe((function(t){e.securityTeams=t,e.selected.clear(),e.loading=!1}))}},{key:"applyFilter",value:function(e){this.filterValue=e}},{key:"addSecurityTeam",value:function(){}},{key:"removeSecurityTeam",value:function(){}},{key:"pageChanged",value:function(e){this.pageSize=e.pageSize,this.tableConfigService.setTablePageSize(this.tableId,e.pageSize)}}]),e}()).\u0275fac=function(e){return new(e||Ft)(f.Qb(p.b),f.Qb(s.g),f.Qb(l.bb),f.Qb(c.a))},Ft.\u0275cmp=f.Kb({type:Ft,selectors:[["app-facility-security-teams"]],decls:8,vars:6,consts:[[1,"page-subtitle"],[3,"refresh"],[3,"placeholder","filter"],["class","ml-auto mr-auto",4,"ngIf"],[3,"pageSize","filterValue","securityTeams","selection","page",4,"ngIf"],[1,"ml-auto","mr-auto"],[3,"pageSize","filterValue","securityTeams","selection","page"]],template:function(e,t){1&e&&(f.Wb(0,"div"),f.Wb(1,"h1",0),f.Lc(2),f.jc(3,"translate"),f.Vb(),f.Wb(4,"perun-web-apps-refresh-button",1),f.ec("refresh",(function(){return t.refreshTable()})),f.Vb(),f.Wb(5,"perun-web-apps-immediate-filter",2),f.ec("filter",(function(e){return t.applyFilter(e)})),f.Vb(),f.Jc(6,Lt,1,0,"mat-spinner",3),f.Jc(7,Vt,1,4,"app-security-teams-list",4),f.Vb()),2&e&&(f.Cb(2),f.Mc(f.kc(3,4,"FACILITY_DETAIL.SECURITY_TEAMS.TITLE")),f.Cb(3),f.oc("placeholder","FACILITY_DETAIL.SECURITY_TEAMS.FILTER"),f.Cb(1),f.oc("ngIf",t.loading),f.Cb(1),f.oc("ngIf",!t.loading))},directives:[h.a,m.a,a.t,y.c,kt.a],pipes:[v.d],styles:[""]}),Ft),Ot=i("Fm3m"),Rt=[{path:"",component:V},{path:":facilityId",component:j,children:[{path:"",component:G,data:{animation:"FacilityOverviewPage"}},{path:"resources",component:B.a,data:{animation:"FacilityResourcesPage"}},{path:"allowed-groups",component:Y.a,data:{animation:"FacilityAllowedGroupsPage"}},{path:"service-config",component:Ye,data:{animation:"FacilityServiceConfigPage"}},{path:"services-destinations",component:et,data:{animation:"FacilityServicesDestinationsPage"}},{path:"hosts",component:gt,data:{animation:"FacilityHostsPage"}},{path:"hosts/:hostId",component:Et,data:{animation:"FacilityHostsDetailPage"}},{path:"security-teams",component:_t,data:{animation:"FacilitySecurityTeamsPage"}},{path:"settings",component:U,children:[{path:"",component:x,data:{animation:"FacilitySettingsOverviewPage"}},{path:"attributes",component:ie,data:{animation:"FacilitySettingsAttributesPage"}},{path:"owners",component:ot,data:{animation:"FacilitySettingOwnersPage"}},{path:"managers",component:He,data:{animation:"FacilitySettingsManagersPage"}},{path:"blacklist",component:Ct,data:{animation:"FacilitySettingsBlackListPage"}}]}]},{path:":facilityId/resources/:resourceId",component:Q.a,children:[{path:"",component:P.a,data:{animation:"ResourceOverviewPage"}},{path:"groups",component:se.a,data:{animation:"ResourceGroupsComponent"}},{path:"settings",component:ae.a,children:[{path:"",component:ce.a,data:{animation:"ResourceSettingsOverviewPage"}},{path:"attributes",component:ne.a,data:{animation:"ResourceSettingsAttributesPage"}},{path:"managers",component:Ot.a,data:{animation:"ResourceSettingsManagersPage"}}]}]}],Mt=((wt=function e(){_classCallCheck(this,e)}).\u0275mod=f.Ob({type:wt}),wt.\u0275inj=f.Nb({factory:function(e){return new(e||wt)},imports:[[c.j.forChild(Rt)],c.j]}),wt),Nt=i("PCNd"),Dt=i("mWkV"),Wt=i("KoHB"),jt=i("Meci"),zt=i("zmEM"),Gt=i("3Uyd");i("5XID"),i("E5oP");var Bt,Yt,Qt,Pt,Ut=((Bt=function e(){_classCallCheck(this,e)}).\u0275mod=f.Ob({type:Bt}),Bt.\u0275inj=f.Nb({factory:function(e){return new(e||Bt)},imports:[[he.k,he.i],he.k,he.i]}),Bt),xt=i("bFHC"),Ht=i("x9Az"),Jt=i("FlRo"),Xt=i("qvOF"),Kt=((Pt=function e(){_classCallCheck(this,e)}).\u0275mod=f.Ob({type:Pt}),Pt.\u0275inj=f.Nb({factory:function(e){return new(e||Pt)},imports:[[a.c,jt.j,zt.b,Gt.b,g.c,Ut,be.b,xt.b,Jt.p,p.h,y.b,fe.e,pe.c,Xt.g,re.k,re.A,Ht.g],jt.j,zt.b,Gt.b,g.c,Ut,be.b,xt.b,Jt.p,p.h,y.b,fe.e,pe.c,Xt.g,re.k,re.A,Ht.g]}),Pt),qt=((Qt=function e(){_classCallCheck(this,e)}).\u0275mod=f.Ob({type:Qt}),Qt.\u0275inj=f.Nb({factory:function(e){return new(e||Qt)},imports:[[a.c,ge.g,J.e,v.c,Kt]]}),Qt),$t=((Yt=function e(){_classCallCheck(this,e)}).\u0275mod=f.Ob({type:Yt}),Yt.\u0275inj=f.Nb({factory:function(e){return new(e||Yt)},providers:[ue.d],imports:[[a.c,Mt,Dt.b,Nt.a,Wt.a,J.e,qt,ue.c]]}),Yt)}}]);